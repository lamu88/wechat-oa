<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"/>
    <title></title>
    <link rel="stylesheet" href="./Tpl/Qyapp/Card/css/style1.css">
	<style>
	.item-span{font-size: 16px;font-family: microsoft yahei;height: 45px;line-height: 45px;color: #444;}
	.address-content{color: #535353;font-size: 14px;font-family: "arial","微软雅黑";background: #fff;width: 100%;overflow: hidden;width: 100%;min-height: 100%;background: #e5e5e5;padding-bottom: 20px;}
	.letter{font-size:16px;height:24px;width:16%;float:left;background-color:#fff;margin:1px;padding:12px 0px 10px 0px;text-align:center;}
	.img-status{display:none;}
	.bg-circle{float:left;width:40px; border-radius:50%;height:40px; line-height:40px;margin-right:3px;margin-bottom:6px;overflow:hidden;}
	.bg-circle-a{float:left;width:40px;height:40px; line-height:40px;margin-right:3px;margin-bottom:6px;overflow:hidden;}
	.bg-text{height:40px; line-height:40px; display:block; color:#FFF; text-align:center;font-size:12px;}
	</style>	
</head>
<body class="bg1" style="background: #e5e5e5;">

        <div class="address-content" id="address-{lanrain:$sign}" style="margin-bottom:50px;padding-bottom:50px;" data-type="">
		    <div style="background-color: #fff;height:50px;position:relative;">
			    <ul style="width:100%;list-style: none;" id="top-menu">
				    <li style="height: 48px;line-height:48px;text-align: center;float: left;width: 33%;">
					    <span>部门</span>
					</li>
				    <li style="height: 48px;line-height:48px;text-align: center;float: left;width: 33%;">
					    <span>人员</span>
					</li>
				    <li style="height: 48px;line-height:48px;text-align: center;float: left;width: 33%;">
					    <span>搜索</span>
					</li>					
				</ul>
				<div class="" style="position:absolute;top:52px;left:0px;width:100%;z-index:9999;background-color:#fff;display:none;" id="letter">
					<div style="padding:3px 0px;margin:0px;background-color:#fafafa;">
						<ul style="padding:0px 0px 10px 0px;height:229px;">
						<li class="letter" onclick="find('A');">A</li>
						<li  class="letter" onclick="find('B');">B</li>
						<li  class="letter" onclick="find('C');">C</li>
						<li  class="letter" onclick="find('D');">D</li>
						<li  class="letter" onclick="find('E');">E</li>
						<li  class="letter" onclick="find('F');">F</li>
						<li  class="letter" onclick="find('G');">G</li>
						<li  class="letter" onclick="find('H');">H</li>
						<li  class="letter" onclick="find('I');">I</li>
						<li  class="letter" onclick="find('J');">J</li>
						<li  class="letter" onclick="find('K');">K</li>
						<li  class="letter" onclick="find('L');">L</li>
						<li  class="letter" onclick="find('M');">M</li>
						<li  class="letter" onclick="find('N');">N</li>
						<li  class="letter" onclick="find('O');">O</li>
						<li  class="letter" onclick="find('P');">P</li>
						<li  class="letter" onclick="find('Q');">Q</li>
						<li  class="letter" onclick="find('R');">R</li>
						<li  class="letter" onclick="find('S');">S</li>
						<li  class="letter" onclick="find('T');">T</li>
						<li  class="letter" onclick="find('U');">U</li>
						<li  class="letter" onclick="find('V');">V</li>
						<li  class="letter" onclick="find('W');">W</li>
						<li  class="letter" onclick="find('X');">X</li>
						<li  class="letter" onclick="find('Y');">Y</li>
						<li  class="letter" onclick="find('Z');">Z</li>
						<li  class="letter" onclick="find('AZ');">#</li>				
						</ul>
					</div>			
				</div>				
			</div>			
			<div style="clear:both;"></div>	
            <div id="tab_0" style="margin-bottom:30px;">	
                <div style="overflow:hidden;height:36px;" id="address-head-list">
				    <div style="float:left;height:36px;line-height:36px;text-align:center;padding-top:6px;padding-left:10px;" id="address-icon" onclick="addressBack()">
					    <span><img src="./Tpl/Qyapp/Common/images/back.png" width="24px" height="24px"></span>
					</div>
					<div class="address-header" style="float:left;height:36px;line-height:36px;text-align:center;" id="dept-top">
					    <span style="">&nbsp;&nbsp;{lanrain:$dept['name']}</span>
					</div>			
                </div>		
				<div style="clear:both;"></div>
                <div id="address-content">				
					<div class="address-list" id="address-{lanrain:$pid}">				
						<div style="background-color:#fff;">
							<ul>
								<volist name="sub" id="sub">
								<li style="" class="deptlist" id="address-dept-{lanrain:$sub.wxid}">
									<div style="border-bottom:1px solid #eee;height:40px;line-height:40px;padding:10px 10px 10px 40px;">
									   <span id="address-dept-name-{lanrain:$sub.wxid}">{lanrain:$sub.name}</span> 
									   <span style="float:right;margin-top:8px;">
										   <span style="margin-right:10px;" onclick="addressSub('{lanrain:$sub.wxid}')"><img src="./Tpl/Qyapp/Common/images/jinru.png" width="24px" height="24px"></span>
									   </span>						   
									</div>
								</li>
								</volist>											
							</ul>
						</div>
						
						<div style="margin-top:10px;">
							<ul style="padding-bottom:5px;margin-left:5px;margin-right:5px;">				
								<volist name="users" id="users">	
                                <a href="{lanrain::U('Card/wap_my_card',array('token'=>$_GET['token'],'wecha_id'=>$_GET['wecha_id'],'userid'=>$users['userid']))}">								
								<li style="background-color: #fff;margin-bottom: 2px;padding: 7px 10px 4px 10px;height:40px;line-height:40px;" id="address-users-{lanrain:$users.id}">
									  <div style="float:left;width:40px;padding:5px 10px 2px 10px;" id="address-users-pic-{lanrain:$users.id}">
										  <if condition="$users['pic']">
										  <img src="{lanrain:$users.pic}" width="30px" height="30px" style="border-radius:50%;">
										  <else/>
										  <img src="./Tpl/Qyapp/Card/images/aabb.png" width="30px" height="30px" style="border-radius:50%;">
										  </if>								      
									  </div>
									  <div style="float:left;width:auto;color: #535353;" id="address-users-name-{lanrain:$users.id}">
									  {lanrain:$users.name}
									  </div>
									   <div style="float:right;margin-top:8px;margin-right:6px;">
									       
										   <span style="" onclick="addressCard('{lanrain:$users.id}')"><img src="./Tpl/Qyapp/Common/images/jinru.png" width="24px" height="24px"></span>
										   
									   </div>								  					
								</li>
                                </a>								
								</volist>																						
							</ul>
						</div>	
					</div>
				</div>
            </div>	
            <div style="display:none;" id="tab_1">	
                <volist name="lists" id="add">			
				<div style="" class="userletter" id="{lanrain:$add.letter}">
				    <p style="height:24px;line-height:24px;font-size:14px;margin-left:10px;">{lanrain:$add.letter}</p>
					<ul style="list-style:none;padding-bottom:5px;margin-left:5px;margin-right:5px;" id="lists-{lanrain:$add.letter}">
					    <volist name="add.data" id="vo">
                            <a href="{lanrain::U('Card/wap_my_card',array('token'=>$_GET['token'],'wecha_id'=>$_GET['wecha_id'],'userid'=>$vo['userid']))}">						
							<li style="background-color: #fff;margin-bottom: 2px;padding: 7px 10px 4px 10px;height:40px;line-height:40px;" id="lists-users-{lanrain:$vo.id}">
								  <div style="float:left;width:40px;padding:5px 10px 2px 10px;" id="lists-users-pic-{lanrain:$vo.id}">
									  <if condition="$vo['pic']">
									  <img src="{lanrain:$vo.pic}" width="30px" height="30px" style="border-radius:50%;">
									  <else/>
									  <img src="./Tpl/Qyapp/Card/images/aabb.png" width="30px" height="30px" style="border-radius:50%;">
									  </if>								      
								  </div>
								  <div style="float:left;width:auto;color: #535353;" id="lists-users-name-{lanrain:$vo.id}">
								  {lanrain:$vo.name}
								  </div>
								   <div style="float:right;margin-top:8px;">
								       
									   <span style="" onclick="addressCard('{lanrain:$vo.id}')"><img src="./Tpl/Qyapp/Common/images/jinru.png" width="24px" height="24px"></span>
									   
								   </div>								  					
							</li>
                            </a>							
						</volist>								
					</ul>
				</div>
				<div style="clear:both;"></div>
				</volist>				
			</div>		
        </div>
	    <script src="./Tpl/Qyapp/Static/Js/jquery-1.9.1.min.js" type="text/javascript"></script>		
		<script>
		$('#tab_0').show();	
		$('#top-menu li:first-child').css('border-bottom','3px solid red');
		$('#top-menu li').each(function(){
			$(this).click(function(){
				$('#top-menu li').css('border-bottom','none');
				$(this).css('border-bottom','3px solid red');	
				var index = $(this).index();
				if(index == 0){
					$('#letter').hide();		
					$('#tab_0').show();
					$('#tab_1').hide();			
				}else if(index == 1){				
					$('#letter').hide();		
					$('#tab_0').hide();		
					$('#tab_1').show();	
					$('div.userletter').show();				
				}else if(index == 2){
				    if($('#letter').is(':visible')){
					    $('#letter').hide();
					}else{
					    $('#letter').show();
					}				
					$('#tab_0').hide();		
					$('#tab_1').show();
				}
			});
		});
		//按字母搜索
		function find(letter){
			$('#letter').hide();
			var letter = letter.toLowerCase();
			$('div.userletter').hide();
			$('#'+letter).show();
		}	

		//进入下一级部门
		function addressSub(id){		
		    var deptName = $('#address-dept-name-'+id).text();
			if($('#address-'+id).is(':visible')){
			    return false;
			}else if($('#address-'+id).length > 0 && $('#address-'+id).is(':hidden')){
			    $('.address-list').hide();
			    $('#address-'+id).show();
			}else{
				var url = "index.php?g=Qyapp&m=Card&a=wap_sub&token={lanrain::$_GET['token']}&wecha_id={lanrain::$_GET['wecha_id']}&id="+id+"&type=1";
				$.ajax({
					type: "GET",
					cache: false,
					url: url,
					dataType: "html",
					success: function (res) {
					   $('.address-header').hide();
			           $('#address-head-list').append('<div class="address-header" style="float:left;height:36px;line-height:36px;text-align:center;"><span>&nbsp;&nbsp;'+deptName+'</span></div>');		
					    $('.address-list').hide();
						$('#address-content').append(res);
					},
					error: function (xhr, ajaxOptions, thrownError) {
					    alert('加载失败');
					}
				});				
			}
		}	
			
		//进入名片页
		function addressCard(){
		
		}		
		
		function addressBack(){
			if($('#address-head-list').children('.address-header').length > 1){
				$('.address-header').hide();
				$('#address-head-list').children('.address-header').last().remove();
				$('#address-head-list').children('.address-header').last().show();
				$('.address-list').hide();
				$('#address-content').children('.address-list').last().remove();
				$('#address-content').children('.address-list').last().show();			
			}else{
			    return false;
			}
		}
		</script>
</body>
</html>