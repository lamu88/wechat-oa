<include file="Common:header" />
	<link href="./Tpl/Qyapp/Static/Js/jstree/3.0.2/themes/default/style.min.css" rel="stylesheet">	
	<link href="./Tpl/Qyapp/Static/Js/bootstrap/switch/docs/css/highlight.css" rel="stylesheet">		
    <link href="./Tpl/Qyapp/Static/Js/bootstrap/switch/dist/css/bootstrap3/bootstrap-switch.min.css" rel="stylesheet">	
	  
	<script src="./Tpl/Qyapp/Static/Js/jquery-1.9.1.min.js" type="text/javascript"></script>
	<script src="/Tpl/static/artDialog/jquery.artDialog.js?skin=default"></script>
	<script src="/Tpl/static/artDialog/plugins/iframeTools.js"></script>	
	<script src="./Tpl/Qyapp/Static/Js/bootstrap/3.1.1/dist/js/bootstrap.min.js"></script>		
	<script src="./Tpl/Qyapp/Static/Js/bootstrap/switch/docs/js/highlight.js" type="text/javascript"></script>	
	<script src="./Tpl/Qyapp/Static/Js/bootstrap/switch/dist/js/bootstrap-switch.min.js" type="text/javascript"></script>
	<script charset="utf-8" src="./Tpl/static/kindeditor/kindeditor-min.js"></script>
	<script charset="utf-8" src="./Tpl/static/kindeditor/lang/zh_CN.js"></script>
	<link rel="stylesheet" href="./Tpl/static/kindeditor/themes/default/default.css" />
	<link rel="stylesheet" href="./Tpl/Qyapp/Static/Css/uploadify.min.css" />
<script type="text/javascript">
	KindEditor.ready(function(K) {
		var editor;
		editor = K.create('textarea[name="content"]', {
			resizeType : 0,
			allowPreviewEmoticons :false,
			allowImageUpload :true,
			uploadJson:'{lanrain::U("Adminupload/uploadType",array("is_url"=>1,"file_type"=>"image"))}',
			formatUploadUrl:false,
			items : [
				'fontname', 'fontsize', '|', 'forecolor', 'hilitecolor', 'bold', 'italic', 'underline',
				'removeformat', '|', 'justifyleft', 'justifycenter', 'justifyright', 'insertorderedlist',
				'insertunorderedlist', '|', 'emoticons', 'image', 'link']
		});		
	});	
</script>
<script type="text/javascript">
	KindEditor.ready(function(K) 
	{
		var editor = K.editor({
			allowFileManager : false,
			uploadJson:'{lanrain::U("Adminupload/uploadType",array("is_url"=>1,"file_type"=>"image"))}',
			formatUploadUrl:false
		});				
		K('#file_upload-button').click(function() {

			editor.loadPlugin('image', function() {
				editor.plugin.imageDialog({
					showRemote : false,
					imageUrl : K('#url3').val(),
					clickFn : function(url, title, width, height, border, align) {
						var html = '<li class="imgbox" data-path="'+url+'" data-post-id="2414"><a class="item_close" title="删除" href="javascript:void(0)"></a><input type="hidden" name="GoodsImages[]" value="'+url+'"><span class="item_box"><img src="'+url+'" height="130px" width="130px"></span></li>';
						$('#fileList').append(html);			
						editor.hideDialog();
					}
				});
			});
		});	
		K('#image3').click(function() {

			editor.loadPlugin('image', function() {
				editor.plugin.imageDialog({
					showRemote : false,
					imageUrl : K('#url3').val(),
					clickFn : function(url, title, width, height, border, align) {
						$('.imgurl').val(url); 
						$('.img_view').attr('src',url);			
						editor.hideDialog();
					}
				});
			});
		});			
	});
</script>
<style> 
/*UP*/
a.a_upload,a.a_choose{border:1px solid #3d810c;box-shadow:0 1px #CCCCCC;-moz-box-shadow:0 1px #CCCCCC;-webkit-box-shadow:0 1px #CCCCCC;cursor:pointer;display:inline-block;text-align:center;vertical-align:bottom;overflow:visible;border-radius:3px;-moz-border-radius:3px;-webkit-border-radius:3px;vertical-align:middle;background-color:#f1f1f1;background-image: -webkit-linear-gradient(bottom, #CCC 0%, #E5E5E5 3%, #FFF 97%, #FFF 100%); background-image: -moz-linear-gradient(bottom, #CCC 0%, #E5E5E5 3%, #FFF 97%, #FFF 100%); background-image: -ms-linear-gradient(bottom, #CCC 0%, #E5E5E5 3%, #FFF 97%, #FFF 100%); color:#000;border:1px solid #AAA;padding:2px 8px 2px 8px;text-shadow: 0 1px #FFFFFF;font-size: 14px;line-height: 1.5;
}
</style>
<style>
    .mr-left{margin-left: 0px;padding-left: 0px;}
    .mr-left label{margin-left: 0px;padding-left: 0px;width: 1%;}
    .hidden{display:none;}
</style>
<style>
    .img-temp li{max-width:92px;position: relative;}
    .img-temp li i.text-success{position: absolute;right: 2px;bottom: 6px;font-size: 16px;display: none;}
    .img-temp .active{background-color: rgb(84, 236, 181)}
    .img-temp .active i.text-success{display: block;}
    .select-radios{display: none;}
    .img-temp li .text-choose{font-size: 65px;}
</style>
<div id="myModal" class="modal fade" tabindex="-2" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">

</div>
 <section class="hbox stretch">
    <aside class="aside-md bg-white b-r" id="subNav">
    <include file="Borrow_books:navmenu" />
    </aside> 
	<aside>
<section class="vbox" style="position:absolute; top:0;">
    <header class="header bg-white b-b b-light">
        <p>添加分类</p>
        <a class="text-muted pull-right m-t pointer" data-toggle="back" href="javascript:history.go(-1)" title="返回"><i class="fa fa-reply"></i></a>
    </header>
    <section class="scrollable  wrapper">
        <section class="panel panel-default">
            <div class="panel-body">
                <form class="form-horizontal form-validate" id="from" method="post" target="_self" action="{lanrain::U('Borrow_books/catInsert',array('mid'=>$_GET['mid']))}">
                <input type="hidden" value="{lanrain::$pid}" name="pid"  >  		  	
				
                    <div class="form-group">
                        <label class="col-sm-2 control-label must">分类名称</label>

                        <div class="col-sm-3 ">
                            <input type="text" class="form-control" placeholder="分类名称" id="name" value="" name="name" data-rule-required="true" data-rule-maxlength="20" />
                        </div>
                    </div>
					<!--
					<div class="form-group">
                        <label class="col-sm-2 control-label must">该名称标题</label>

                        <div class="col-sm-3 ">
                            <input type="text" class="form-control" placeholder="该名称标题" value="" name="title" data-rule-required="true" data-rule-maxlength="20" />
                        </div>
                    </div>
					-->
                    <div class="form-group">
                        <label class="col-sm-2 control-label must">分类描述</label>

                        <div class="col-sm-3 ">
                            <input type="text" class="form-control" placeholder="分类描述" value="" id="info" name="info" data-rule-required="true" data-rule-maxlength="20" />
                        </div>
                    </div>						
                    <div class="form-group" id="singleUplaod">
                        <div class="js_single">
                            <label class="col-sm-2 control-label">分类图片:</label>

                            <div class="col-sm-3">
                                <input class="form-control imgurl" type="text" id='imgurl' name="img" placeholder="+请选择上传图片" value="" /> 
								<button class="btn btn-default btn-sm js_add_img_btn" type="button" data-toggle="selectimg"  href="javascript:void();"   id="image3" >选择上传图片</button>
								<button type="button" class="btn btn-default btn-sm js_delete hd" onclick="delLevel($(this))">删除</button>
                            </div>
                        </div>图片上传后不可再修改

                    </div>
				    
                    <div class="form-group">
                        <label class="col-sm-2 control-label">显示顺序</label>

                        <div class="col-sm-3 ">
                            <input type="text" class="form-control" placeholder="显示顺序" value="" name="sorts" data-rule-required="true" data-rule-maxlength="20" />
                        </div>
                    </div>						
                     <div class="form-group">
                        <label class="col-sm-2 control-label">外链</label>

                        <div class="col-sm-3 ">
                            <input type="text" class="form-control" placeholder="外链" value="" name="url" data-rule-required="true" data-rule-maxlength="20" />
                        </div>
                    </div>	 					
                    <!-- <div class="form-group">
                        <label class="col-sm-2 control-label">分类页模板</label>
                        <div class="col-sm-3 ">
                            <input type="text" class="form-control" id="selecttpl" value="点击右侧按钮选择" disabled="" name="list" data-rule-required="true" />
                        </div>
                        <div class="col-sm-2 ">
							<button class="btn btn-default btn-sm js_add_img_btn" onclick="chooseTpl('tpid','selecttpl',1)" type="button" data-toggle="selectimg" >选择分类页模板</button>
                        </div>
                        <div class="col-sm-3">
                            <button class="btn btn-default btn-sm js_add_img_btn" onclick="viewTpl()" type="button" data-toggle="selectimg" >预览</button>
							<input type="hidden" id="tpid" value="" name="tpl_list">不填则使用默认模板	
                        </div>						
                    </div> -->

					<script>
						//function viewTpl(){
						//	var tid = $('#tpid').val();
						//	chooseTpl(tid,'',2);
						//}
					</script>					
                    <!-- <div class="form-group">
                        <label class="col-sm-2 control-label">内容页模板</label>

                        <div class="col-sm-3 ">
                            <input type="text" class="form-control" id="selectconttpl"  value="点击右侧按钮选择" disabled="" name="content" data-rule-required="true" />
                        </div>
                        <div class="col-sm-2 ">
                            <button class="btn btn-default btn-sm js_add_img_btn" onclick="chooseTpl('conttpid','selectconttpl',3)" type="button" data-toggle="selectimg" >选择内容页模板</button>
                        </div>	
                        <div class="col-sm-3 ">
                            <button class="btn btn-default btn-sm js_add_img_btn" onclick="viewTpl2()" type="button" data-toggle="selectimg" >预览</button>
							<input type="hidden" value="1" id="conttpid" name="tpl_content">不填则使用默认模板					
                        </div>
                       						
                    </div> -->					

				<script>
					//function viewTpl2(){
					//	var tid = $('#conttpid').val(); 
					//	chooseTpl(tid,'',2);
					//}
					//function chooseTpl(domid,domid2,type){
					//	art.dialog.data('domid', domid);
					//	art.dialog.data('domid2', domid2);
					//	if(type == 1 || type == 3){
					//		art.dialog.open('?g=Qyapp&m=Borrow_books&a=chooseTpl&type='+type,{lock:true,title:'选择模板',width:1050,height:450,yesText:'关闭',background: '#000',opacity: 0.45});
					//	}else{
					//		art.dialog.open('?g=Qyapp&m=Borrow_books&a=chooseTpl&tpid='+domid+'&type='+type,{lock:true,title:'预览选中模板',width:400,height:500,yesText:'关闭',background: '#000',opacity: 0.45});
					//	}
					//}			
				</script>
                    <div class="form-group">
                        <label class="col-sm-2 control-label must">是否显示</label>

                        <div class="col-sm-9">
                            <label class="radio-inline"><input type="radio" checked value="1" name="status">显示</label>
                            <label class="radio-inline"><input type="radio"  value="0" name="status">不显示</label>
                        </div>
                    </div>

					
                    <div class="form-group">
                        <div class="col-sm-4 col-sm-offset-2">
                            <button class="btn btn-primary" data-loading-text="保存中..." type="submit">保存</button>
                        </div>
                    </div>
</form>
            </div>
        </section>
    </section>
</section>
</aside>
</section>
<script>
		$("#from").submit(function(){
			var book_name=$("#name").val();
			var number=$("#info").val();
			
			if(book_name == ''){
				alert("分类名称不能为空");
				return false;
			}
			if(number == ''){
				alert("分类描述不能为空");
				return false;
			}
		});
	
	</script>

<include file="Common:footer" />