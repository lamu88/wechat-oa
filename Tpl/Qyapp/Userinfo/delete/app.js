/*! weimob_vshop_admin
*author:<a.b.c@hd3p.com> */
define("dist/application/app",["$","./setting","dist/tips/init","./method","./extend","./element","./entity","./plugins","./tmp/logtmp.html","./jqplugins","./template"],function(a){var b=a("$"),c=a("./setting"),d=a("./method");a("./extend"),a("./element");var e=a("./plugins");e.init(document),a("./jqplugins");var f=a("./entity");return window.template=a("./template"),b.ajaxSetup({cache:!1,dataType:"json"}),b("form.form-validate").length>0&&a.async("dist/form/init",function(a){var c=b("form.form-validate");c.length&&a.init(c)}),b("table").length>0&&a.async("dist/table/init"),template.helper("transMsgTime",function(a){return d.transMsgTime(1e3*parseInt(a))}),{config:c,method:d,plugin:e,entity:f,v:"1.0.1"}}),define("dist/application/setting",["$","dist/tips/init"],function(a,b){"use strict";var c=(a("$"),a("dist/tips/init")),b={kindeditor:{"default":{items:["source","|","undo","redo","|","preview","print","template","cut","copy","paste","plainpaste","wordpaste","|","justifyleft","justifycenter","justifyright","justifyfull","insertorderedlist","insertunorderedlist","indent","outdent","subscript","superscript","clearhtml","quickformat","selectall","|","fullscreen","/","formatblock","fontname","fontsize","|","forecolor","hilitecolor","bold","italic","underline","strikethrough","lineheight","removeformat","|","image","insertfile","table","hr","emoticons","baidumap","code","pagebreak","link","unlink"],height:"400px",width:"100%",afterCreate:function(){this.sync()},afterBlur:function(){this.sync()}},simple:{items:["undo","redo","plainpaste","plainpaste","wordpaste","clearhtml","quickformat","selectall","fullscreen","fontname","fontsize","|","forecolor","hilitecolor","bold","italic","underline","hr","removeformat","|","justifyleft","justifycenter","justifyright","insertorderedlist","insertunorderedlist","|","emoticons","image","link","unlink","preview"],height:"300px",width:"100%",afterCreate:function(){this.sync()},afterBlur:function(){this.sync()}},mini:{items:["fontsize","forecolor","hilitecolor","bold","italic","removeformat","justifyleft","justifycenter","justifyright","insertorderedlist","insertunorderedlist","link","unlink"],height:"300px",width:"100%",afterCreate:function(){this.sync()},afterBlur:function(){this.sync()}}},loading:'<div  class="load"></div>',issucceed:function(a){return 0==a.status},membersp:"p",empty:"",lang:{saveSuccess:"保存成功",modifySuccess:"修改成功",saveError:"保存失败",modifyError:"修改失败",exception:"网络异常 请重试",confirmRemove:"确定删除 ?",confirmAllremove:"确定删除选定 ?",removeSuccess:"删除成功",removeError:"删除失败",attributeError:"获取商品属性出错,请重试",specificationsError:"获取商品规格出错,请重试",confirmPost:"确定提交",confirmChangedelivery:"切换计价方式后,所设置当前模版的运费信息将被清空,确认继续",confirmChangetemplet:"你要载入新模版吗？当前数据将被清空",shelvesSuccess:"上架成功",shelvesError:"上架失败 请重试",confirmRefund:"<p><b>确认退款</b></p><p>确认后钱将直接通过原支付方式返回，无法撤销，请再次确认。</p>",confirmRefundGoods:"<p><b>同意退款退货</b></p><p>退货地址：加载中...</p>",confirmCloseOrder:"确定关闭订单,关闭订单后将无法改价或发货",widgetError:"部件添加失败,请重试",pageInfoError:"部件添加失败,请重试",templateConfigLoadError:"模版配置加载失败,请重试",maxNavLength:"最多添加5个导航",maxFnLength:"最多添加4个导航",minOneItem:"至少保留一个",maxItem10:"最多添加10个",pathError:"无法获取Path",uplodError:"上传失败，请重新上传。"},statistics:{},domain:{www:window.location.protocol+"//"+window.location.host,"static":window.location.protocol+"//"+window.location.host}};return window.wm=b,b.msg=window.top!=window.self?window.parent.msg:c,b}),define("dist/application/method",["$","dist/application/setting","dist/tips/init"],function(a){"use strict";var b=a("$"),c=a("dist/application/setting"),d=function(a,d,e,f,g){b.ajax(a,{type:f||"post",data:g,dataType:"json"}).done(function(a){d&&d(a)}).fail(function(){c.msg.info(e||c.lang.exception)})};return{get:function(a,b,c,e){d(a,b,c,"get",e)},post:function(a,b,c,e,f){d(a,b,c,e,f)},postd:function(a,b,c){d(a,b,!1,!1,c)},transMsgTime:function(a){var b,c,d,e,f,g={0:"周日",1:"周一",2:"周二",3:"周三",4:"周四"};return a?(c=new Date,b="object"==typeof a&&a.constructor===Date?a:new Date(a),d=(c-b)/1e3,60>d?"刚刚":3600>d?Math.floor(d/60)+"分钟前":10800>d?Math.floor(d/3600)+"小时前":(f={year:b.getFullYear(),month:b.getMonth()+1,date:b.getDate(),day:b.getDay(),hours:b.getHours()>=10?b.getHours():"0"+b.getHours().toString(),min:b.getMinutes()>=10?b.getMinutes():"0"+b.getMinutes().toString()},e={year:c.getFullYear(),month:c.getMonth()+1,date:c.getDate(),day:c.getDay()},f.date===e.date&&f.month===e.month&&f.year===e.year?"今天"+f.hours+":"+f.min:e.date-f.date===1&&172800>d?"昨天"+f.hours+":"+f.min:e.day-f.day>0&&604800>d?g[f.day]+f.hours+":"+f.min:f.year===e.year?f.month+"月"+f.date+"日":f.year+"年"+f.month+"月"+f.date+"日")):""},getFormatDateStr:function(a){var b=new Date(1e3*a),c=b.getFullYear(),d=(b.getDate(),b.getMonth()+1);return c+"年"+d+"月"},getFormatDateStrNow:function(){return(new Date).format("yyyy年M月")},getfileExt:function(a){return/[.]/.exec(a)?/[^.]+$/.exec(a.toLowerCase()):""},validKindEditor:function(){var a=!0;return"undefined"!=typeof KindEditor&&KindEditor.instances&&b.each(KindEditor.instances,function(){this.sync();var d=b(this.srcElement[0]),e=d.data("ruleRequired"),f=d.data("msgRequired"),g=d.data("ruleRangelength"),h=d.data("msgRangelength"),i=b.trim(d.val()).replace(/(&nbsp;)|\s|\u00a0/g,"");if(e&&0==i.length){var j=f;c.msg.error(j||"内容不能为空"),a=!1}if(g){var k=g[0],l=g[1],m=d.val();(m.length<k||m.length>l)&&(c.msg.error(h||"内容不能小于{0}且大于{1}".format(k,l)),a=!1)}}),a},OpenWindowWithPost:function(a,b,c,d){var e=document.createElement("form");e.setAttribute("method",d),e.setAttribute("action",a),e.setAttribute("target",b);for(var f in c){var g=document.createElement("input");g.type="hidden",g.name=c[f].name,g.value=c[f].value,e.appendChild(g)}document.body.appendChild(e),e.submit(),document.body.removeChild(e)},URL:function(a){var b=a||window.location.href,c="",d={},e="",f=function(){var a=b,f=a.indexOf("#");if(f>0&&(e=a.substr(f),a=a.substring(0,f)),f=a.indexOf("?"),f>0){c=a.substring(0,f),a=a.substr(f+1);for(var g=a.split("&"),h=0;h<g.length;h++){var i=g[h].split("=");d[i[0]]=i[1]}}else c=b,d={}};this.set=function(a,b){d[a]=encodeURIComponent(b)},this.remove=function(a){a in d&&(d[a]=void 0)},this.get=function(a){return d[a]},this.url=function(){var a=c,b=[];for(var f in d)d[f]&&b.push(f+"="+d[f]);return b.length>0&&(a+="?"+b.join("&")),e.length>0&&(a+=e),a},this.debug=function(){var a=[];for(var b in d)a.push(b+"="+d[b]);alert(a)},f()}}}),define("dist/application/extend",[],function(){"use strict";String.prototype.format||(String.prototype.format=function(){var a=arguments;return this.replace(/{(\d+)}/g,function(b,c){return"undefined"!=typeof a[c]?a[c]:b})}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s*/,"").replace(/\s*$/,"")}),String.prototype.parameters||(String.prototype.parameters=function(){for(var a={},b=new RegExp("([\\?|&])(.+?)=([^&?]*)","ig"),c=b.exec(this);c;)a[c[2]]=c[3],c=b.exec(this);return a}),String.prototype.stripTags||(String.prototype.stripTags=function(){return this.replace(/<\/?[^>]+>/gi,"")}),String.prototype.getNum||(String.prototype.stripTags=function(){return this.replace(/[^d]/g,"")}),String.prototype.getEn||(String.prototype.getEn=function(){return this.replace(/[^A-Za-z]/g,"")}),String.prototype.getCn||(String.prototype.getCn=function(){return this.replace(/[^u4e00-u9fa5uf900-ufa2d]/g,"")}),Date.prototype.format||(Date.prototype.format=function(a){var b={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),"S+":this.getMilliseconds()};/(y+)/i.test(a)&&(a=a.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var c in b)new RegExp("("+c+")").test(a)&&(a=a.replace(RegExp.$1,1==RegExp.$1.length?b[c]:("00"+b[c]).substr((""+b[c]).length)));return a}),window.StringBuilder=function(){this.tmp=new Array},StringBuilder.prototype.Append=function(a){return this.tmp.push(a),this},StringBuilder.prototype.Clear=function(){tmp.length=1},StringBuilder.prototype.toString=function(){return this.tmp.join("")}}),define("dist/application/element",["$","dist/application/setting","dist/tips/init","dist/application/method","dist/application/entity","dist/application/plugins"],function(a){"use strict";var b=a("$"),c=a("dist/application/setting"),e=a("dist/application/method"),f=a("dist/application/entity"),g=a("dist/application/plugins");b(document).on("click",'[data-toggle="trigger"]',function(a){a&&a.preventDefault();var c=b(this).data("target").split(":");c&&b(c[0]).trigger(c[1])}),b(document).on("click",'[data-toggle="back"]',function(a){a&&a.preventDefault();var c=b(this).data("url");c?window.location=c:window.history.go(-1)}),b.fn.extend({popoverClosable:function(a){var c={template:'<div class="popover"><div class="arrow"></div><div class="popover-header"><button type="button" class="close m-r-xs m-t-xs" data-dismiss="popover" aria-hidden="true">&times;</button><h3 class="popover-title"></h3></div><div class="popover-content"></div></div>'};a=b.extend({},c,a);var d=this;d.popover(a),d.on("click",function(a){a.preventDefault(),d.not(this).popover("hide")}),b(document).on("click",'[data-dismiss="popover"]',function(){d.popover("hide")})}}),b('[data-toggle="popover"]').popoverClosable(),b(document).on("click",'[data-toggle^="class"]',function(a){"checkbox"!=a.target.type&&"radio"!=a.target.type&&a&&a.preventDefault();var d,f,g,h,i,j=b(a.target);!j.data("toggle")&&(j=j.closest('[data-toggle^="class"]')),d=j.data().toggle,f=j.data("target")||j.attr("href"),d&&(g=d.split(":")[1])&&(h=g.split(",")),f&&(i=f.split(",")),i&&i.length&&b.each(i,function(a){"#"!=i[a]&&b(i[a]).toggleClass(h[a])}),j.toggleClass("active");var k=b(this),l=k.data("ajax"),m=k.data("fun"),n=k.data("remote")||k.attr("href"),o=null;if(m)switch(m){case"shelves":o=function(a){c.issucceed(a)?c.msg.suc(a.message||c.lang.shelvesSuccess,a.url):c.msg.error(a.message||c.lang.shelvesError,a.url)}}l&&e.post(n,o,null,null,{toggle:k.hasClass("active")})}),b(document).on("click",'[data-toggle="ajaxModal"]',function(c){var d=b(this);b("#ajaxModal").remove(),c.preventDefault();var d=b(this),e=d.data("remote")||d.attr("href"),f=d.data("set"),h=b('<div class="modal fade" id="ajaxModal"><div class="modal-body "></div></div>');b(document).append(h),h.modal(),b.ajax(e,{type:"get",dataType:"html",data:f}).done(function(c){h.append2(c,function(){var c=b("form.form-validate",h);c.length>0&&a.async("dist/form/init",function(a){b("button[type='submit']",h).removeAttr("disabled"),a.init(c),g.init(c)}),d.trigger("init",h)})})}),b('[data-toggle="buttons"]').bind("change",function(){var a=b(this),c=a.data("change");switch(c){case"submit":a.closest("form").submit()}}),b(document).on("click.dropdown-menu",".dropdown-select > li > a",function(a){a.preventDefault();var c,d,e,f,g,h,i=b(a.target),j=!1;if(!i.is("a")&&(i=i.closest("a")),d=i.closest(".dropdown-menu"),e=d.parent().find(".dropdown-label"),f=e.text(),c=i.find("input"),j=c.is(":checked"),!(c.is(":disabled")||"radio"==c.attr("type")&&j)){"radio"==c.attr("type")&&d.find("li").removeClass("active"),i.parent().removeClass("active"),!j&&i.parent().addClass("active"),c.prop("checked",!c.prop("checked")),g=d.find("li > a > input:checked"),g.length?(h=[],g.each(function(){var a=b(this).parent().text();a&&h.push(b.trim(a))}),h=h.length<6?h.join(", "):" 选中"+h.length+"项",e.html(h)):e.html(e.data("placeholder")),c.trigger("change",[c.val()]);var k=d.data("change");if(k)switch(k){case"submit":d.closest("form ").submit()}}}),b(document).on("click",'table [data-toggle="removeRow"]',function(){var a=b(this).closest("tr");a.fadeOut(function(){a.remove()})}),b(document).on("click",".js_entity_view",function(a){var c=b(this);if(c.hasClass("js_entity_selected")){var d=b(".entity-panel");d.length&&d.trigger("close")}else{var e=b.extend(!0,{onShow:function(){c.addClass("js_entity_selected active")},onClose:function(){c.removeClass("js_entity_selected active")}},c.data());f.init(e,a)}}),b(document).on("click",'[data-toggle="openPost"]',function(){var a=b(this),c=a.closest("form"),d=a.data("set"),f=a.data("type")||"get";if(c.length){var g=c.serializeArray();g.push({name:"set",value:d}),e.OpenWindowWithPost(c.attr("action"),"form1",g,f)}}),b(document).on("click",'[data-toggle="ajaxPost"]',function(a){a.preventDefault();var d=b(this),e=d.data("remote")||d.attr("href"),f=d.data("confirm"),g=d.data("msgType"),h=d.data("set"),i=d.data("remove");d.data("loadingText",'<i class="fa fa-spinner fa-spin"></i>');var j=function(){d.html();d.button("loading"),b.post(e,h).done(function(a){if(d.button("reset"),c.issucceed(a)){if(i){var b=d.closest(i);b.fadeOut(function(){b.remove()})}c.msg.suc(a.message||c.lang.removeSuccess,a.url)}else c.msg.error(a.message||c.lang.removeError,a.url)}).fail(function(){d.button("reset"),c.msg.info(c.lang.exception)})},k=function(a){switch(a){case"refund":return c.lang.confirmRefund;case"refundGoods":return c.lang.confirmRefundGoods}},l=g?k(g):d.data("msg");f&&c.msg.msgbox.confirm({message:l||c.lang.confirmPost,buttons:{confirm:{label:d.data("confirmText")||"确定"}},callback:function(a){a&&j()}}),!f&&j()}),b(document).on("click",".js_remove_dd_item",function(){var a=b(this),c=a.closest(".dd-item");c.fadeOut(function(){c.remove(),0==b(".dd-item").length&&b("#noitems").removeClass("hide")})}),b(document).on("click",'ol li [data-toggle="ajaxRemove"]',function(a){a.preventDefault();var e=b(this),f=e.data("remote")||e.attr("href"),g=e.data("confirm");g="undefined"==typeof g?!0:g;var h=function(){var a=e.html();e.html('<i class="fa fa-spinner fa-spin"></i>'),b.post(f).done(function(d){if(c.issucceed(d)){c.msg.suc(d.message||c.lang.removeSuccess,d.url);var f=e.parents("li").first();f.find(".dd-handle").css({"background-color":"#dff0d8"}),f.fadeOut(function(){f.remove(),0==b(".dd-item").length&&$noClassify.removeClass("hide")})}else e.html(a),c.msg.error(d.message||c.lang.removeError,d.url)}).fail(function(){e.html(a),c.msg.info(c.lang.exception,d.url)})};g&&c.msg.msgbox.confirm(e.data("msg")||c.lang.confirmRemove,function(a){a&&h()}),!g&&h()}),b(document).on("click",'[data-dismiss="entity"]',function(){b(this).closest(".entity-panel").trigger("close")});var h="input,textarea,button,select,option,a,button,.entity-panel,.modal";b(document).on("keyup",function(a){var c=b(".entity-panel");if(c.length){if(b(event.target).closest(h).length)return!0;27===a.which&&c.trigger("close")}}),b(document).on("click",function(){return b(event.target).closest(h).length?!0:void(!b(this).closest("table.entity-view").length&&function(){var a=b(".entity-panel");a.length&&a.trigger("close")}())})}),define("dist/application/entity",["$","dist/application/setting","dist/tips/init","dist/application/plugins","dist/application/method"],function(a){"use strict";var b=a("$"),c=a("dist/application/setting"),d=a("dist/application/plugins"),e=a("dist/application/tmp/logtmp.html");return{init:function(a,f){var g=b(f.target),h=g.data("force");if(!h&&b(f.target).closest("input,textarea,button,select,option,a").length)return!0;this.options=b.extend(!0,{},a);var i=b(".entity-panel");i.length&&i.trigger("close"),this.options.path?b.ajax(this.options.path,{type:"get",dataType:"html",data:a.set}).done(function(c){var f=b(c);b("body").append(f),d.init(f),f.removeClass("hd").animate({right:0},"fast"),f.bind("close",function(){f.animate({right:"-35%"},"fast",function(){f.remove()}),a.onClose&&a.onClose()});var g=b(".js_operlog",f);if(g.length>0){var h=g.data("path");h&&g.scrollPage({selector:".contact_log_items li:last",path:h,data:{count:40}},function(a,c){a.scrollPage("toggleDone",c.is_continue),c.list&&c.list.length>0&&b(".contact_log_items",g).append(template.compile(e)(c))})}}).fail(function(){c.msg.info(c.lang.exception)}).always(function(){a.onShow&&a.onShow()}):(c.msg.info(c.lang.exception),console.error(c.lang.pathError))}}}),define("dist/application/plugins",["$","dist/application/setting","dist/tips/init","dist/application/method"],function(a,b){"use strict";var c=a("$"),d=a("dist/application/setting"),e=a("dist/application/method");c("[data-toggle=tooltip]").tooltip(),b.init=function(b){var f=c('[data-toggle="chosen"]',b);f.length>0&&a.async(["chosen","style/plugins/chosen/chosen.min.css"],function(){f.each(function(){var a=c(this),b=a.data("nosearch"),e={},f=a.data("maxlength"),g=a.data("remote")||a.attr("href");f&&(e.max_selected_options=f),b&&(e.disable_search_threshold=9999999),e.hide=!1,e.no_results_text="找不到",g?(console.log(g),c.ajax(g,{type:"post",dataType:"json"}).done(function(b){c.each(b,function(b,c){var d='<option value="{1}">{0}</option>';a.append(d.format(c.text,c.value))}),a.chosen(e)}).fail(function(){d.msg.info("网络异常")})):a.chosen(e)})});var g=c('[data-toggle="select2"]',b);g.length>0&&a.async(["select2","style/plugins/select2/select2.min.css"],function(){g.each(function(){{var a=c(this),b={},d=a.data("maxcount"),e=a.data("chang");a.data("remote")||a.attr("href")}if(d&&(b.maximumSelectionSize=d),e)switch(e){case"submit":a.on("change",function(){a.closest("form ").submit()})}a.select2(b)})});var h=c('[data-toggle="reportrange"]',b);h.length>0&&a.async(["moment","daterangepicker","style/plugins/daterangepicker/daterangepicker-bs3.min.css"],function(){h.each(function(){var a=c(this),b=(a.data("selected"),a.find("span")),d=b.text().split("-"),e=moment(d[0]),f=moment(d[1]),g=f.diff(e,"days");a.daterangepicker({format:"YYYY/MM/DD HH:mm",ranges:{"今天":[moment(),moment()],"昨天":[moment().subtract("days",1),moment().subtract("days",1)],"最近7天":[moment().subtract("days",6),moment()],"最近30天":[moment().subtract("days",29),moment()],"这个月":[moment().startOf("month"),moment().endOf("month")],"上个月":[moment().subtract("month",1).startOf("month"),moment().subtract("month",1).endOf("month")]},startDate:e||moment().subtract("days",g),endDate:f||moment()},function(b,d){var e=b.format("YYYY/MM/DD")+" - "+d.format("YYYY/MM/DD");c("span",a).html(e),c('input[type="hidden"]',a).val(e);var f=a.data("change");if(f)switch(f){case"submit":a.closest("form ").submit()}})})});var i=c('[data-toggle="combodate"]',b);i.length>0&&a.async(["combodate"],function(){i.each(function(){var a=c(this);a.combodate({minuteStep:1})})});var j=c('[data-toggle="clockpicker"]',b);j.length>0&&a.async(["clockpicker","style/plugins/clockpicker/clockpicker.min.css"],function(){j.each(function(){var a=c(this),b=a.find("input[type='text']:first"),d=a.data("placement")||"top",e=a.data("align")||"left",f=a.data("autoclose")||!1,g=b.data("than"),h=b.data("less");a.clockpicker({placement:d,align:e,autoclose:f,afterDone:function(){if(g){var a=c(g),d=a.val(),e=b.val();if(e){var f=e.split(":");if(d){var i=d.split(":"),j=b.closest(".form-group"),k=b.data("thanMsg")||"时间",l=f[0]-0,m=f[1]-0,n=i[0]-0,o=i[1]-0;0>l-n?(b.removeClass("error"),j.find(".js_validate_error").remove(),j.append("<span class='error help-block js_validate_error'>"+k+"设置有误，必须大于"+d+"！</span>"),b.addClass("error")):l-n==0&&0>=m-o?(b.removeClass("error"),j.find(".js_validate_error").remove(),j.append("<span class='error help-block js_validate_error'>"+k+"设置有误，必须大于"+d+"！</span>"),b.addClass("error")):(b.removeClass("error"),a.removeClass("error"),j.find(".js_validate_error").remove())}}}if(h){var p=c(h),q=p.val(),e=b.val();if(e){var f=e.split(":");if(q){var i=q.split(":"),j=b.closest(".form-group"),k=b.data("lessMsg")||"时间",l=f[0]-0,m=f[1]-0,n=i[0]-0,o=i[1]-0;l-n>0?(b.removeClass("error"),j.find(".js_validate_error").remove(),j.append("<span class='error help-block js_validate_error'>"+k+"设置有误，必须小于"+q+"！</span>"),b.addClass("error")):l-n==0&&m-o>=0?(b.removeClass("error"),j.find(".js_validate_error").remove(),j.append("<span class='error help-block js_validate_error'>"+k+"设置有误，必须小于"+q+"！</span>"),b.addClass("error")):(b.removeClass("error"),p.removeClass("error"),j.find(".js_validate_error").remove())}}}}});var i=a.next("span.input-group-addon"),j=a.prev("span.input-group-addon");i.add(j).on("click",function(){a.clockpicker("show")})})});var k=c('[data-toggle="daterangepicker"]',b);k.length>0&&a.async(["moment","daterangepicker","style/plugins/daterangepicker/daterangepicker-bs3.min.css"],function(){k.each(function(){var a=c(this);a.daterangepicker({timePicker:!0,format:"YYYY/MM/DD HH:mm"});var b=a.next("span.input-group-addon"),d=a.prev("span.input-group-addon");b.add(d).on("click",function(){a.trigger("click")})})});var l=c('[data-toggle="dateRange"]',b);l.length>0&&a.async(["moment","daterangepicker","style/plugins/daterangepicker/daterangepicker-bs3.min.css"],function(){l.each(function(){var a=c(this),b=c(this).data("format"),d=c(this).data("timePicker");a.daterangepicker({timePicker:d,format:b})})});var m=c('[data-toggle="switch"]',b);m.length>0&&a.async(["switch","style/plugins/switch/switch.min.css"],function(){c.each(m,function(){var a=c(this),b=a.data("path");a.bootstrapSwitch(),b&&function(){a.on("switchChange.bootstrapSwitch",function(a,c){e.postd(b,function(a){d.issucceed(a)||d.msg.error(a.message||d.lang.modifyError,a.url)},{state:c})})}()})});var n=c('[data-toggle="datepicker"]',b);n.length>0&&a.async(["datepicker","style/plugins/datepicker/datepicker3.min.css"],function(){n.each(function(){var a=c(this),b=a.data("startdate"),d="";d="now"==b||""==b?new Date:new Date(b),a.datepicker({startDate:d});var e=a.next("span.input-group-addon"),f=a.prev("span.input-group-addon");e.add(f).on("click",function(){a.datepicker("show")})})});var o=c('[data-toggle="datetimepicker"]',b);o.length>0&&a.async(["moment","datetimepicker","style/plugins/datetimepicker/datetimepicker.min.css"],function(){o.each(function(){var a=c(this),b=a.data("minutestep")||1,d=a.data("position")||"bottom-left";a.datetimepicker({language:"zh-CN",minuteStep:b,pickerPosition:d,autoclose:!0});var e=a.next("span.input-group-addon"),f=a.prev("span.input-group-addon");e.add(f).on("click",function(){a.datetimepicker("show")})})});var p=c('[data-provides="fileinput"]',b);p.length>0&&a.async("fileupload");var q=c('[data-toggle="ajaxfile"]',b);q.length>0&&a.async("ajaxfileupload",function(){c.each(q,function(){var a=c(this),b=a.data();c(this).ajaxfile({path:b.path},function(a){if(0==a.error?b.target&&c(""+b.target).attr("src",a.url):d.msg.error(a.message||d.lang.removeError,a.url),a.refresh){var f=new e.URL(window.parent.location.href);f.set("url",window.location.href),window.parent.location=f.url()}})})});var r=c(".js_fresco",b);r.length>0&&a.async(["fresco","style/plugins/fresco/fresco.min.css"],function(){var a=c.map(r,function(a){return{options:{thumbnail:c(a).attr("src")},url:c(a).data("src")}});r.closest("li").on("click",function(){var b=c(this).index();Fresco.show(a,{ui:"inside"},b+1)})});var s=c('[data-toggle="location"]',b);s.length>0&&a.async("dist/location/init.js",function(a){c.each(s,function(){var b=c(this),d=c('[data-location="provinces"]',b),e=c('[data-location="city"]',b),f=c('[data-location="district"]',b),g=new a.select({data:a.data});g.bind(d),g.bind(e),g.bind(f)})});var t=c('[data-toggle="select_level2"]',b);if(t.length>0){var u=c("form.form-validate",b);a.async("dist/location/init.js",function(a){var b=c('[data-location="select_level_1"]',u),d=c('[data-location="select_level_2"]',u),e=new a.select({data:window.select_level2_data});e.bind(b),e.bind(d)})}var v=c(".js_copy_text",b);v.length>0&&a.async("zeroclipboard",function(){ZeroClipboard.setDefaults({moviePath:"/assets/swf/zeroclipboard.swf"}),c.each(v,function(a){var b="copy_button{0}".format(a),d='  <button class="btn btn-default js_copy" id="{0}" type="button" data-clipboard-target="{2}" data-clipboard-text="{1}"><i class="icon-copy"></i>复制</button>  <span class="alert copy-success  alert-success hd "  >复制成功,请粘帖到您需要的地方</span>',e=c(this),f=e.text().trim(),g=e.attr("id");g?e.after(d.format(b,"",g)):e.append(d.format(b,f));var h=c("#"+b),i=new ZeroClipboard(h),j=function(a){var b=a.nextAll("span.copy-success");b.show(),setTimeout(function(){b.fadeOut()},1e3)};i.on("complete",function(a){j(c(a.options.button))})}),c(document).on("click","button.js_copy",function(){var a=c(this),b=a.data("clipboard-text").trim();c.browser.msie?(window.clipboardData.setData("Text",b),success(a)):prompt("按下 Ctrl+C 复制到剪贴板",b)})}),window.wm.tokeninputtree=function(b){a.async(["jstree","tokeninput","style/plugins/tokeninput/tokeninput.min.css","style/plugins/jstree/jstree.min.css"],function(){c.each(b,function(){var a=c(this),b=a.data("path"),f=a.data("contact"),g=a.data("selected"),h=a.data("selectedContact"),i=a.data("tokenLimit"),j=a.data("part"),k=function(b){var d=h.split(",");c.each(b,function(b,e){c.inArray(e.id,d)>-1&&a.tokenInput("add",e)})};b?e.get(b,function(b){a.tokenInputTree(c.tokenInputConverter.forparty2token(b),c.tokenInputConverter.forparty2node(b),{classes:{dropdown:"token-input-dropdown memberDialog_selectTree"},tokenLimit:i||999},g),f&&e.get(f,function(b){var d=a.data("settings"),e=c.tokenInputConverter.formember2token(b);d.local_data=d.local_data.concat(e),k(e)},!1,j?{department:g,member:h}:!1)},!1,j?{department:g}:!1):f&&e.get(f,function(b){var d=c.tokenInputConverter.formember2token(b);a.tokenInputTree(d,0,{classes:{dropdown:"token-input-dropdown memberDialog_selectTree"},tokenLimit:i||999},0),k(d)},!1,j?{department:g,member:h}:!1),a.closest("form").on("click",'button[type="submit"],[data-toggle="method"]',function(){if(a.data("ruleRequired")&&!a.prev(".token-input-list").is(":hidden")&&0==a.tokenInput("get").length){var c="请选择{0}{1}",e=b?"部门":"",g=b?f?"或人员":"":f?"人员":"",h=c.format(e,g),i=a.data("requiredMsg");return d.msg.info(i||h),window.formValided=!1,!1}})})})};var w=c('[data-toggle="tokeninputtree"]',b);w.length>0&&window.wm.tokeninputtree(w);var x=c('[data-toggle="treeinput"]',b);x.length>0&&a.async(["jstree","style/plugins/jstree/jstree.min.css"],function(){c.each(x,function(){var a=c(this),d=a.data("path"),f=a.data("selected");e.get(d,function(d){for(var e=c.tokenInputConverter.forparty2node(d,{selected:f||[-1]}),g={},h=e.length-1;h>=0;h--)g[e[h].id]=e[h].text;a.jstree({core:{data:e,themes:{name:!1,url:!1,dir:!1,icons:!0,variant:!1,stripes:!1,responsive:!0,dots:!0}},types:{"default":{icon:"icon icon_folder_blue"}},plugins:["types","wholerow"]}).on("select_node.jstree",function(a,d){c(".jstreeinput_val",b).val(d.selected);for(var e=[],f=d.selected.length-1;f>=0;f--)e.push(g[d.selected[f]]);c(".jstreeinput_val",b).data("list",e)})})}),c(b).on("click",'button[type="submit"]',function(){var a=c(this).closest(".form-horizontal").find(".jstreeinput_val").length;return console.log(c(".jstreeinput_val",b).val()),c(".jstreeinput_val",b).val().length<1&&a?(d.msg.msgbox.alert("至少选择一个部门"),!1):void 0})})}}),define("dist/application/tmp/logtmp.html",[],'{{each list as item index}}\n<li>\n    <p class="log_time">{{transMsgTime item.Time}}</p>\n    <p class="log_text">{{item.Operation}}</p>\n</li>\n{{/each}}'),define("dist/application/jqplugins",["$","dist/application/setting","dist/tips/init","dist/application/method"],function(c){"use strict";{var d=c("$"),e=c("dist/application/setting");c("dist/application/method")}d(function(){var a=d(".no-touch .slim-scroll");a.length>0&&c.async(["slimscroll"],function(){a.each(function(){var a,b=d(this),c=b.data();b.slimScroll(c),d(window).resize(function(){clearTimeout(a),a=setTimeout(function(){b.slimScroll(c)},500)})})})}),d.fn.addAttr=function(a,b){return this.each(function(){var c=d(this);b?c.attr(a,a):c.removeAttr(a)})},d.fn.adddClass=function(a,b){return this.each(function(){var c=d(this);b&&c.addClass(a)})},d.fn.addhtml=function(a,b){return this.each(function(){var c=d(this);b?c.append(a):c.prepend(a)})},d.fn.append2=function(a,b){var c=d("body").html().length;this.append(a);var e=1,f=setInterval(function(){e++;var a=function(){clearInterval(f),b()},g=c!=d("body").html().length||e>1e3;g&&a()},1)},!function(c){var d=function(a,b){return b||(b={}),{id:a.id,parent:a.parentid||"#",text:a.name,state:{opened:b.selected?a.id==b.selected||-1==b.selected&&0==a.parentid:0==a.parentid,disabled:a.is_readonly,selected:c.inArray(a.id,b.selected)>-1},wid:a.wid}},f=function(a,b){b||(b={});var c={id:a.id,name:a.name,keywords:[a.name,a.pinyinname],wid:a.wid,readonly:b.readonly};return a.name&&c.keywords.push(a.name),a.pinyinname&&c.keywords.push(a.pinyinname),c},g=function(a,b){b||(b={});var c={id:e.membersp+a.id,name:a.username,username:a.username,keywords:[],thumb_path:a.thumb_path,readonly:b.readonly,JoinStatus:a.JoinStatus};return a.username&&c.keywords.push(a.username),a.pinyinname&&c.keywords.push(a.pinyinname),a.bizmpid&&c.keywords.push(a.bizmpid),c};c.tokenInputConverter={party2node:function(a,b){return d(a,b)},forparty2node:function(a,b){var e=[];return c.each(a,function(a,c){e.push(d(c,b))}),e},party2token:function(){return f(item,options)},forparty2token:function(a,b){var d=[];return c.each(a,function(a,c){d.push(f(c,b))}),d},member2token:function(a,b){return g(a,b)},formember2token:function(a,b){var d=[];return c.each(a,function(a,c){d.push(g(c,b))}),d},membersForValue:function(c){var d=c.split(","),e=[];return a.each(d,function(a,c){c&&c[0]!=b&&e.push(c)}),e},partiesForValue:function(c){var d=c.split(","),e=[];return a.each(d,function(a,c){c&&c[0]==b&&e.push(c.substr(1))}),e}}}(jQuery),!function(a){function b(a){return a.replace(d,function(a){return c[a]})}var c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"},d=/[&<>"'\/]/g,f={init:function(c,d,f,g){var h=this,i=function(b){if(!h.data("jstree")){var c=a('<div class="token-input-jstree">token-input-jstree</div>').appendTo(b).on("select_node.jstree",function(a,b){h.data("tokeninput").tokenInput("add",{id:b.node.id,name:b.node.text,wid:b.node.wid})});c.jstree({core:{themes:{name:!1,url:!1,dir:!1,icons:!0,variant:!1,stripes:!1,responsive:!0,dots:!0},data:d},types:{"default":{icon:"icon icon_folder_blue"}},plugins:["wholerow","types"]}),h.data("jstree",c)}},j=function(a){var c=a.id.toString(),d=a.name;return c[0]==e.membersp?"<li><img src='"+a.thumb_path+"' style='float:left;width:26px;height:26px;margin-right:6px'><span>"+(this.enableHTML?d:b(d))+"</span></li>":"<li>"+(this.enableHTML?d:b(d))+"</li>"},k=function(a){var c=a.id.toString(),d=a.name;return c[0]==e.membersp?"<li><img src='"+a.thumb_path+"' style='float:left;width:26px;height:26px'><p class='group_item_name'>"+(this.enableHTML?d:b(d))+"</p></li>":"<li><p class='group_item_name'>"+(this.enableHTML?d:b(d))+"</p></li>"},l={propertyToSearch:"keywords",searchDelay:50,searchingText:null,resultsLimit:20,excludeCurrent:!0,preventDuplicates:!0,animateDropdown:!1,hintText:d&&d.length?i:"输入成员名称",resultsFormatter:j,tokenFormatter:k};f=a.extend({},l,f);var m=h.tokenInput(c,f);g&&a.each(d,function(b,c){a.inArray(c.id,g)>-1&&m.tokenInput("add",{id:c.id.toString(),name:c.text,wid:c.wid})}),h.data("tokeninput",m)},destroy:function(){this.data("jstree")&&(this.data("jstree").jstree().destroy(),this.removeData("jstree")),this.data("tokeninput")&&(this.data("tokeninput").tokenInput("destroy"),this.removeData("tokeninput"))},addtoken:function(){}};a.fn.tokenInputTree=function(a){return f[a]?f[a].apply(this,Array.prototype.slice.call(arguments,1)):f.init.apply(this,arguments)}}(jQuery),!function(a){var b=function(b,c,d){this.element=a(d),this.init(b,c),this.perform=!1};b.defaults={selector:null,bufferPx:30,appendElement:null,state:{is_continue:1,currPage:1},data:{},path:null},b.prototype={init:function(c,d){this.options=a.extend(!0,{},b.defaults,c);var e=this;this.element.on("scroll",function(){e.is_continue()&&e.beginAjax(e.element,d)}),e.beginAjax(e.element,d)},selector:function(){return a(this.options.selector)},is_continue:function(){var b=this.selector();return b.length?!this.perform&&this.options.state.is_continue&&b.offset().top+this.options.bufferPx<a(window).height():!1},beginAjax:function(b,c){var d=this;d.perform=!0;var f=a.extend(!0,{page:this.options.state.currPage},this.options.data);a.ajax({dataType:"json",type:"GET",data:f,url:this.options.path}).done(function(a){c(b,a)}).fail(function(){e.msg.info(e.lang.exception)}).always(function(){d.options.state.currPage++,d.perform=!1
})},update:function(b){a.isPlainObject(b)&&(this.options=a.extend(!0,this.options,b))},destroy:function(){this.element.unbind("scroll"),this.element.removeData("scrollPage")},toggleDone:function(a){this.options.state.is_continue=a}},a.fn.scrollPage=function(c,d){var e=typeof c;if("string"===e){var f=Array.prototype.slice.call(arguments,1);this.each(function(){var b=a.data(this,"scrollPage");return b&&a.isFunction(b[c])&&"_"!==c.charAt(0)?void b[c].apply(b,f):!1})}else this.each(function(){var e=a.data(this,"scrollPage");e?e.update(c):(e=new b(c,d,this),a.data(this,"scrollPage",e))})}}(jQuery),!function(a){var b=function(a,b,c){this.element=c.get(0),this.defaults_file_type=b,this.init(a)};b.defaults={url:e.empty,multi:!1,prevent_duplicates:!1,mime_types:[],max_file_size:0,data:{},max_count:0,FilesAdded:function(){},UploadProgress:function(){},FileUploaded:function(){},UploadComplete:function(){}},b.prototype={init:function(c){var d=this;if(this.defaults_file_type){switch(this.defaults_file_type){case"picture":b.defaults.max_file_size="2mb",b.defaults.mime_types=[{title:"图片文件",extensions:"bmp,png,jpeg,jpg,gif"}],plupload.addI18n({"File extension error.":"图片格式必须为以下格式：bmp, jpeg, jpg, gif","File size error.":"文件大小错误。"});break;case"voice":b.defaults.max_file_size="5mb",b.defaults.mime_types=[{title:"音频文件",extensions:"mp3,wma,wav,amr"}],plupload.addI18n({"File extension error.":"语音格式必须为以下格式：mp3, wma, wav, amr"});break;case"video":b.defaults.max_file_size="20mb",b.defaults.mime_types=[{title:"视频文件",extensions:"rm,rmvb,wmv,avi,mpg,mpeg,mp4"}],plupload.addI18n({"File extension error.":"视频格式必须为以下格式：rm, rmvb, wmv, avi, mpg, mpeg, mp4"});break;case"file":b.defaults.max_file_size="10mb",b.defaults.mime_types=[{title:"自定义文件",extensions:"txt,xml,pdf,zip,doc,ppt,xls,docx,pptx,xlsx"}],plupload.addI18n({"File extension error.":"文件格式必须为以下格式：txt, xml, pdf, zip, doc, ppt, xls, docx, pptx, xlsx"})}plupload.addI18n({"File size error.":"最大只能上传{0}的文件".format(b.defaults.max_file_size)})}this.options=a.extend(!0,{},b.defaults,c),this.plupload=new plupload.Uploader({runtimes:"html5,flash,silverlight,html4",browse_button:d.element,url:d.options.url,flash_swf_url:"/assets/swf/Moxie.swf",silverlight_xap_url:"/assets/swf/Moxie.xap",multi_selection:d.options.multi,filters:{max_file_size:d.options.max_file_size,prevent_duplicates:d.options.prevent_duplicates,mime_types:d.options.mime_types},multipart_params:d.options.data,init:{FilesAdded:function(a,b){return d.options.max_count&&a.files.length>d.options.max_count?(e.msg.info("最多上传{0}个文件".format(d.options.max_count)),plupload.each(b,function(b){a.removeFile(b)}),!1):(d.options.FilesAdded(a,b),void a.start())},UploadProgress:function(a,b){d.options.UploadProgress(a,b)},UploadComplete:function(a,b){d.options.UploadComplete(a,b)},FileUploaded:function(b,c,e){d.options.FileUploaded(b,c,a.parseJSON(e.response))},Error:function(a,b){return e.msg.info(b.message),!1}}}),this.plupload.init()},update:function(b){a.isPlainObject(b)&&(this.options=a.extend(!0,this.options,b))},destroy:function(){this.plupload.destroy(),this.element.removeData("uploader")}},a.fn.uploader=function(d,e){var f=this;c.async(["plupload"],function(){var c=typeof d;if("string"===c){var g=Array.prototype.slice.call(arguments,1);f.each(function(){var b=a.data(f,"uploader");return b&&a.isFunction(b[d])&&"_"!==d.charAt(0)?void b[d].apply(b,g):!1})}else f.each(function(){var c=a.data(f,"uploader");c?c.update(d):(c=new b(d,e,f),a.data(f,"uploader",c))})})}}(jQuery),!function(a){a.fn.setCursorPosition=function(b){return 0==this.lengh?this:a(this).setSelection(b,b)},a.fn.setSelection=function(a,b){if(0==this.lengh)return this;var c=this[0];if(c.createTextRange){var d=c.createTextRange();d.collapse(!0),d.moveEnd("character",b),d.moveStart("character",a),d.select()}else c.setSelectionRange&&(c.focus(),c.setSelectionRange(a,b));return this},a.fn.focusEnd=function(){this.setCursorPosition(this.val().length)}}(jQuery),!function(a){a.fn.ajaxfile=function(b,d){var f=a(this);c.async("ajaxfileupload",function(){f.on("click",function(){var a=f.find(":file"),c=f.find(".btn"),g=f.data();c.data("loadingText",'<i class="fa fa-spinner fa-spin"></i>上传中'),a.on("change",function(f){var h=void 0!==f.target.files?f.target.files[0]:f.target.value?{name:f.target.value.replace(/^.+\\/,"")}:null,i=function(d){c.button("loading"),jQuery.ajaxFileUpload({url:b.path,secureuri:!1,dataType:"json",fileElement:a,data:b.data,success:function(a){d(a),c.button("reset")},error:function(a){return console.log(a),c.button("reset"),e.msg.info("上传文件错误，请重新上传。"),!1}})};if(h.name)if(g.type)switch(g.type){case"img":if(!/(.*)\.(jpg|gif|jpeg|png|bmp)$/i.test(h.name))return e.msg.info("请上传jpg、gif、jpeg、png或bmp格式的图片。"),!1;i(function(a){d(a)})}else console.error("输入类型")})})})}}(jQuery),jQuery.extend({unselectContents:function(){window.getSelection?window.getSelection().removeAllRanges():document.selection&&document.selection.empty()}}),jQuery.fn.extend({selectContents:function(){d(this).each(function(a){var b,c,d,e,f=this;(d=f.ownerDocument)&&(e=d.defaultView)&&"undefined"!=typeof e.getSelection&&"undefined"!=typeof d.createRange&&(b=window.getSelection())&&"undefined"!=typeof b.removeAllRanges?(c=d.createRange(),c.selectNode(f),0==a&&b.removeAllRanges(),b.addRange(c)):document.body&&"undefined"!=typeof document.body.createTextRange&&(c=document.body.createTextRange())&&(c.moveToElementText(f),c.select())})},setCaret:function(){if(d.browser.msie){var a=function(){var a=d(this).get(0);a.caretPos=document.selection.createRange().duplicate()};d(this).click(a).select(a).keyup(a)}},insertAtCaret:function(a){var b=d(this).get(0);if(document.all&&b.createTextRange&&b.caretPos){var c=b.caretPos;c.text=""==c.text.charAt(c.text.length-1)?a+"":a}else if(b.setSelectionRange){var e=b.selectionStart,f=b.selectionEnd,g=b.value.substring(0,e),h=b.value.substring(f);b.value=g+a+h,b.focus();var i=a.length;b.setSelectionRange(e+i,e+i),b.blur()}else b.value+=a}})}),!function(a){"use strict";var b=function(a,c){return b["string"==typeof c?"compile":"render"].apply(b,arguments)};b.version="2.0.4",b.openTag="<%",b.closeTag="%>",b.isEscape=!0,b.isCompress=!1,b.parser=null,b.render=function(a,c){var d=b.get(a)||e({id:a,name:"Render Error",message:"No Template"});return d(c)},b.compile=function(a,d){function g(c){try{return new k(c,a)+""}catch(f){return i?e(f)():b.compile(a,d,!0)(c)}}var h=arguments,i=h[2],j="anonymous";"string"!=typeof d&&(i=h[1],d=h[0],a=j);try{var k=f(a,d,i)}catch(l){return l.id=a||d,l.name="Syntax Error",e(l)}return g.prototype=k.prototype,g.toString=function(){return k.toString()},a!==j&&(c[a]=g),g};var c=b.cache={},d=b.helpers=function(){var a=function(b,c){return"string"!=typeof b&&(c=typeof b,"number"===c?b+="":b="function"===c?a(b.call(b)):""),b},c={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"},d=function(b){return a(b).replace(/&(?![\w#]+;)|[<>"']/g,function(a){return c[a]})},e=Array.isArray||function(a){return"[object Array]"==={}.toString.call(a)},f=function(a,b){if(e(a))for(var c=0,d=a.length;d>c;c++)b.call(a,a[c],c,a);else for(c in a)b.call(a,a[c],c)};return{$include:b.render,$string:a,$escape:d,$each:f}}();b.helper=function(a,b){d[a]=b},b.onerror=function(b){var c="Template Error\n\n";for(var d in b)c+="<"+d+">\n"+b[d]+"\n\n";a.console&&console.error(c)},b.get=function(d){var e;if(c.hasOwnProperty(d))e=c[d];else if("document"in a){var f=document.getElementById(d);if(f){var g=f.value||f.innerHTML;e=b.compile(d,g.replace(/^\s*|\s*$/g,""))}}return e};var e=function(a){return b.onerror(a),function(){return"{Template Error}"}},f=function(){var a=d.$each,c="break,case,catch,continue,debugger,default,delete,do,else,false,finally,for,function,if,in,instanceof,new,null,return,switch,this,throw,true,try,typeof,var,void,while,with,abstract,boolean,byte,char,class,const,double,enum,export,extends,final,float,goto,implements,import,int,interface,long,native,package,private,protected,public,short,static,super,synchronized,throws,transient,volatile,arguments,let,yield,undefined",e=/\/\*[\w\W]*?\*\/|\/\/[^\n]*\n|\/\/[^\n]*$|"(?:[^"\\]|\\[\w\W])*"|'(?:[^'\\]|\\[\w\W])*'|[\s\t\n]*\.[\s\t\n]*[$\w\.]+/g,f=/[^\w$]+/g,g=new RegExp(["\\b"+c.replace(/,/g,"\\b|\\b")+"\\b"].join("|"),"g"),h=/^\d[^,]*|,\d[^,]*/g,i=/^,+|,+$/g,j=function(a){return a.replace(e,"").replace(f,",").replace(g,"").replace(h,"").replace(i,"").split(/^$|,+/)};return function(c,e,f){function g(a){return r+=a.split(/\n/).length-1,b.isCompress&&(a=a.replace(/[\n\r\t\s]+/g," ").replace(/<!--.*?-->/g,"")),a&&(a=w[1]+l(a)+w[2]+"\n"),a}function h(a){var c=r;if(o?a=o(a):f&&(a=a.replace(/\n/g,function(){return r++,"$line="+r+";"})),0===a.indexOf("=")){var e=!/^=[=#]/.test(a);if(a=a.replace(/^=[=#]?|[\s;]*$/g,""),e&&b.isEscape){var g=a.replace(/\s*\([^\)]+\)/,"");d.hasOwnProperty(g)||/^(include|print)$/.test(g)||(a="$escape("+a+")")}else a="$string("+a+")";a=w[1]+a+w[2]}return f&&(a="$line="+c+";"+a),i(a),a+"\n"}function i(b){b=j(b),a(b,function(a){a&&!s.hasOwnProperty(a)&&(k(a),s[a]=!0)})}function k(a){var b;"print"===a?b=y:"include"===a?(t.$include=d.$include,b=z):(b="$data."+a,d.hasOwnProperty(a)&&(t[a]=d[a],b=0===a.indexOf("$")?"$helpers."+a:b+"===undefined?$helpers."+a+":"+b)),u+=a+"="+b+","}function l(a){return"'"+a.replace(/('|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n")+"'"}var m=b.openTag,n=b.closeTag,o=b.parser,p=e,q="",r=1,s={$data:1,$id:1,$helpers:1,$out:1,$line:1},t={},u="var $helpers=this,"+(f?"$line=0,":""),v="".trim,w=v?["$out='';","$out+=",";","$out"]:["$out=[];","$out.push(",");","$out.join('')"],x=v?"$out+=$text;return $text;":"$out.push($text);",y="function($text){"+x+"}",z="function(id,data){data=data||$data;var $text=$helpers.$include(id,data,$id);"+x+"}";a(p.split(m),function(a){a=a.split(n);var b=a[0],c=a[1];1===a.length?q+=g(b):(q+=h(b),c&&(q+=g(c)))}),p=q,f&&(p="try{"+p+"}catch(e){throw {id:$id,name:'Render Error',message:e.message,line:$line,source:"+l(e)+".split(/\\n/)[$line-1].replace(/^[\\s\\t]+/,'')};}"),p=u+w[0]+p+"return new String("+w[3]+");";try{var A=new Function("$data","$id",p);return A.prototype=t,A}catch(B){throw B.temp="function anonymous($data,$id) {"+p+"}",B}}}();"function"==typeof define?define("dist/application/template",[],function(){return b}):"undefined"!=typeof exports&&(module.exports=b),a.template=b}(this),function(a){a.openTag="{{",a.closeTag="}}",a.parser=function(b){b=b.replace(/^\s/,"");var c=b.split(" "),d=c.shift(),e=c.join(" ");switch(d){case"if":b="if("+e+"){";break;case"else":c="if"===c.shift()?" if("+c.join(" ")+")":"",b="}else"+c+"{";break;case"/if":b="}";break;case"each":var f=c[0]||"$data",g=c[1]||"as",h=c[2]||"$value",i=c[3]||"$index",j=h+","+i;"as"!==g&&(f="[]"),b="$each("+f+",function("+j+"){";break;case"/each":b="});";break;case"echo":b="print("+e+");";break;case"include":b="include("+c.join(",")+");";break;default:a.helpers.hasOwnProperty(d)?b="=#"+d+"("+c.join(",")+");":(b=b.replace(/[\s;]*$/,""),b="="+b)}return b}}(this.template);